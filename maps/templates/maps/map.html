{% extends "maps/_base.html" %}
{% block title %}
    Maps
{% endblock title %}
{% block content %}
    <div class="mb-4">
        <input type="text" class="form-control form-control-lg" placeholder="Search for something...">
    </div>
    <div class="row g-2">
        <div class="col-lg-4 order-2 order-lg-1">
            <div class="list-group list-group-numbered"
                 style="height:80vh;
                        overflow-y: scroll">
                {% for object in object_list %}
                    <a href="#"
                       class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">
                        <div class="ms-2 me-auto">
                            <h6 class="text-light">{{ object.name }}</h6>
                            <span class="d-block mb-2">{{ object.address }}</span>
                            <ul class="mb-1">
                                {% for hrs in object.opening_hours %}<li>{{ hrs }}</li>{% endfor %}
                            </ul>
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
        <div class="col-lg-8 order-1 order-lg-2">
            <div id="map" style="height:75vh;" class="bg-secondary"></div>
            <div class="d-flex gap-2 m-2">
                <div class="form-check form-switch">
                    <label for="catchmentRadiusSwitch" class="form-label text-nowrap">Catchment radius</label>
                    <input class="form-check-input" type="checkbox" role="switch" id="catchmentRadiusSwitch" checked>
                </div>
                <input type="range" class="form-range" id="catchmentRadiusInput" min=1 max=20 step=1 value=5 style="width:100px;">
                <div>
                    <span id="catchmentRadiusValue">
                        5
                    </span>
                    <span id="catchmentRadiusUnit">
                        km
                    </span>
                </div>
            </div>
        </div>
    </div>

    <script>

        // Element shortcuts
        const catchmentRadiusSwitch = document.getElementById('catchmentRadiusSwitch');
        const catchmentRadiusInput = document.getElementById('catchmentRadiusInput');
        const catchmentRadiusValue = document.getElementById('catchmentRadiusValue');
        const catchmentRadiusUnit = document.getElementById('catchmentRadiusUnit');

        // when catchmentRadiusInput is changed, update the value of catchmentRadiusValue
        catchmentRadiusInput.addEventListener('input', function () {
            catchmentRadiusValue.innerText = this.value;
        });

        // if catchmentRadiusSwitch is off, disable catchmentRadiusInput
        catchmentRadiusSwitch.addEventListener('change', function () {
            catchmentRadiusInput.disabled = !this.checked;
            if (!this.checked) {
                catchmentRadiusValue.innerText = '';
                catchmentRadiusUnit.innerText = '';
            } else {
                catchmentRadiusValue.innerText = catchmentRadiusInput.value;
                catchmentRadiusUnit.innerText = 'km';
            }
        });

    </script>

{% endblock content %}
